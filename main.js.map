{"version":3,"sources":["webpack://excalibur-webpack/./src/scenes/level-one/level-one.ts","webpack://excalibur-webpack/./src/resources.ts","webpack://excalibur-webpack/./src/actors/player/tile.ts","webpack://excalibur-webpack/./src/index.ts","webpack://excalibur-webpack/webpack/bootstrap","webpack://excalibur-webpack/webpack/runtime/global","webpack://excalibur-webpack/webpack/runtime/hasOwnProperty shorthand","webpack://excalibur-webpack/webpack/runtime/publicPath","webpack://excalibur-webpack/webpack/runtime/jsonp chunk loading","webpack://excalibur-webpack/webpack/startup"],"names":["onInitialize","engine","onActivate","onDeactivate","Scene","Resources","Sword","Texture","sword","Tile","tile","SpriteFont","game","value","x","y","pos","vec","width","height","color","Color","speed","mergeAlignmentDistance","mergeMinimumVelocity","tileValue","body","collider","type","CollisionType","label","Label","on","event","actor","hasOwnProperty","other","tileA","tileB","isMerged","Math","abs","vel","mergedWith","mergeProgressCountdown","mergeOriginalPosition","clone","setDrawingForValue","this","spriteSheet","SpriteSheet","i","addDrawing","getSprite","draw","delta","isKilled","update","kill","scale","dx","dy","newX","newY","setTo","input","keyboard","isHeld","Input","accelerate","text","toString","onPostUpdate","drawWidth","drawHeight","index","log2","setDrawing","Actor","displayMode","DisplayMode","suppressConsoleBootMessage","suppressPlayButton","pointerIsDown","start","tiles","levelOne","LevelOne","addTileOnGrid","font","image","alphabet","caseInsensitive","columns","rows","spWidth","spHeight","newTileTimer","Timer","fcn","console","log","interval","repeats","screen","resolution","add","evt","key","pointers","primary","lastKnownPointerPosition","worldPos","loader","Loader","Object","values","position","worldBounds","getWorldBounds","xTouchRegionWidth","yTouchRegionHeight","filter","length","random","canvasWidth","canvasHeight","pow","floor","push","Engine","then","goToScene","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","m","g","globalThis","Function","e","window","o","obj","prop","prototype","call","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","Error","replace","p","installedChunks","179","deferredModules","checkDeferredModules","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkId","chunkIds","moreModules","runtime","executeModules","resolves","shift","apply","chunkLoadingGlobal","self","checkDeferredModulesImpl","result","deferredModule","fulfilled","j","depId","splice","s","forEach","bind","startup"],"mappings":"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","file":"main.js","sourcesContent":["import { Engine, Scene } from 'excalibur';\n\n/**\n * Managed scene\n */\nexport class LevelOne extends Scene {\n  public onInitialize(engine: Engine) {}\n  public onActivate() {}\n  public onDeactivate() {}\n}\n","import { Texture } from 'excalibur';\nimport sword from './images/sword.png';\nimport tile from './images/tile.png';\nimport spritefont from './images/SpriteFont.png';\n\n/**\n * Default global resource dictionary. This gets loaded immediately\n * and holds available assets for the game.\n */\nconst Resources = {\n    Sword: new Texture(sword),\n    Tile: new Texture(tile),\n    SpriteFont: new Texture(spritefont),\n}\n\nexport { Resources }\n","import { Actor, CollisionType, Color, Input, Label, SpriteSheet, vec, Vector } from 'excalibur';\nimport { Resources } from '../../resources';\nimport { Game } from '../../index';\n\nexport class Tile extends Actor {\n  private tileValue : number;\n  private speed : number = 20;\n  private mergeAlignmentDistance = 8;\n  private mergeMinimumVelocity = 10;\n  private label : Label;\n  private isMerged : boolean;\n  private mergedWith : Tile | undefined;\n  private mergeProgressCountdown : number;\n  private mergeOriginalPosition : Vector;\n  private spriteSheet : SpriteSheet;\n  constructor(game: Game, value: number, x: number, y: number) {\n    super({\n      pos: vec(x, y),\n      width: 32,\n      height: 32,\n      color: new Color(255, 255, 255)\n    });\n    this.tileValue = value;\n    this.body.collider.type = CollisionType.Active;\n\n    this.label = new Label(\"n\", x, y);\n\n    this.on('precollision', (event) => {\n      if (event.actor.hasOwnProperty('tileValue') && event.other.hasOwnProperty('tileValue')){\n        let tileA = event.actor as Tile;\n        let tileB = event.other as Tile;\n        if (tileA.tileValue == tileB.tileValue){\n          // these tiles have the same value, and are candidates for merging.\n\n          if (tileA.isMerged || tileB.isMerged){\n            // don't merge them-- one or both of them are already merged with another tile.\n            return;\n          }\n\n          // Require a minimum alignment for the centers of the two tiles before considering merging them.\n          if (Math.abs(tileA.pos.x - tileB.pos.x) < this.mergeAlignmentDistance || Math.abs(tileA.pos.y - tileB.pos.y) < this.mergeAlignmentDistance)\n          {\n            // Require either one of the tiles to be moving towards the other.\n            if (\n              (Math.abs(tileA.body.vel.x) > Math.abs(tileA.body.vel.y) && // tile A is moving horizontally more than it is vertically\n                tileA.body.vel.x > this.mergeMinimumVelocity && tileB.pos.x > tileA.pos.x || // tile A moving right and tile B is to the right of tile A\n                tileA.body.vel.x < -1 * this.mergeMinimumVelocity && tileB.pos.x < tileA.pos.x) || // tile A moving left and tile B is to the left of tile A\n              (Math.abs(tileB.body.vel.x) > Math.abs(tileB.body.vel.y) && // tile B is moving horizontally more than it is vertically\n                tileB.body.vel.x > this.mergeMinimumVelocity && tileA.pos.x > tileB.pos.x || // tile B moving right and tile A is to the right of tile B\n                tileB.body.vel.x < -1 * this.mergeMinimumVelocity && tileA.pos.x < tileB.pos.x) || // tile B moving left and tile A is to the left of tile B\n              (Math.abs(tileA.body.vel.y) > Math.abs(tileA.body.vel.x) && // tile A is moving vertically more than it is vertically\n                tileA.body.vel.y > this.mergeMinimumVelocity && tileB.pos.y < tileA.pos.y || // tile A moving down and tile B is to the bottom of tile A\n                tileA.body.vel.y < -1 * this.mergeMinimumVelocity && tileB.pos.y > tileA.pos.y) || // tile A moving up and tile B is to the top of tile A\n              (Math.abs(tileB.body.vel.y) > Math.abs(tileB.body.vel.x) && // tile B is moving vertically more than it is vertically\n                tileB.body.vel.y > this.mergeMinimumVelocity && tileA.pos.y < tileB.pos.y || // tile B moving down and tile A is to the bottom of tile A\n                tileB.body.vel.y < -1 * this.mergeMinimumVelocity && tileA.pos.y < tileB.pos.y) // tile A moving up and tile A is to the top of tile B\n            ){\n              // begin merging the tiles.\n              tileA.tileValue += tileB.tileValue;\n              tileB.tileValue = tileA.tileValue;\n              tileB.body.collider.type = CollisionType.PreventCollision;\n              tileB.isMerged = true;\n              tileB.mergedWith = tileA;\n              tileB.mergeProgressCountdown = 100;\n              tileB.mergeOriginalPosition = tileB.pos.clone();\n\n              tileA.setDrawingForValue();\n              tileB.setDrawingForValue();\n            }\n          }\n        }\n      }\n    })\n  }\n\n\n  onInitialize() {\n    this.spriteSheet = new SpriteSheet(Resources.Tile, 4, 4, 32, 32);\n\n    for (let i = 0; i < 16; i++) {\n      this.addDrawing(i, this.spriteSheet.getSprite(i));\n    }\n\n    this.setDrawingForValue();\n  }\n\n  public draw(engine, delta){\n    if (this.isKilled()){\n      return;\n    }\n    super.draw(engine, delta);\n    this.label.draw(engine, delta);\n  }\n\n\n  public update(engine, delta) {\n    if (this.isKilled()){\n      return;\n    }\n\n    if (this.isMerged){ // special behavior for merging tiles-- ignore keyboard input, move toward the center of the merge target and disappear when arriving there\n      if (this.mergeProgressCountdown <= 0){\n        this.kill(); // merge is complete, remove the tile.\n        return;\n      }\n\n      const scale = this.mergeProgressCountdown / 100.0;\n      this.mergeProgressCountdown -= 10;\n      let dx = (this.mergeOriginalPosition.x - this.mergedWith.pos.x) * scale;\n      let dy = (this.mergeOriginalPosition.y - this.mergedWith.pos.y) * scale;\n      let newX = this.mergedWith.pos.x + dx;\n      let newY = this.mergedWith.pos.y + dy;\n      this.pos.setTo(newX, newY);\n    }\n    else {\n      if (\n        engine.input.keyboard.isHeld(Input.Keys.W) ||\n        engine.input.keyboard.isHeld(Input.Keys.Up)\n      ) {\n        this.accelerate(0, -1);\n      }\n      if (\n        engine.input.keyboard.isHeld(Input.Keys.S) ||\n        engine.input.keyboard.isHeld(Input.Keys.Down)\n      ) {\n        this.accelerate(0, 1);\n      }\n      if (\n        engine.input.keyboard.isHeld(Input.Keys.A) ||\n        engine.input.keyboard.isHeld(Input.Keys.Left)\n      ) {\n        this.accelerate(-1, 0);\n      }\n\n      if (\n        engine.input.keyboard.isHeld(Input.Keys.D) ||\n        engine.input.keyboard.isHeld(Input.Keys.Right)\n      ) {\n        this.accelerate(1, 0);\n      }\n    }\n\n    this.label.pos.x = this.pos.x - 4;\n    this.label.pos.y = this.pos.y + 4;\n    this.label.text = this.tileValue.toString();\n    super.update(engine, delta);\n  }\n\n  public onPostUpdate(engine, delta){\n    if (this.pos.x < this.width / 2){\n      this.vel.x = 0;\n      this.pos.x = this.width / 2;\n    }\n\n    if (this.pos.x + this.width / 2 > engine.drawWidth){\n      this.vel.x = 0;\n      this.pos.x = engine.drawWidth - this.width / 2\n    }\n\n    if (this.pos.y < this.height / 2){\n      this.vel.y = 0;\n      this.pos.y = this.height / 2;\n    }\n\n    if (this.pos.y + this.height / 2 > engine.drawHeight){\n      this.vel.y = 0;\n      \n      this.pos.y = engine.drawHeight - this.height / 2\n    }\n    super.onPostUpdate(engine, delta);\n  }\n\n  public accelerate(x: number, y: number){\n    this.vel.setTo(this.vel.x + (this.speed * x), this.vel.y + (this.speed * y));\n  }\n\n  private setDrawingForValue(){\n    let index = Math.log2(this.tileValue);\n    if (index < 0 || index > 16)\n    {\n      index = 0;\n    }\n\n    this.setDrawing(index);\n  }\n}\n","import { Engine, Loader, DisplayMode, Vector, Input, SpriteFont, Timer } from 'excalibur';\nimport { LevelOne } from './scenes/level-one/level-one';\nimport { Player } from './actors/player/player';\nimport { Tile } from './actors/player/tile';\nimport { Resources } from './resources';\n\n/**\n * Managed game class\n */\nexport class Game extends Engine {\n  private levelOne: LevelOne;\n  private tiles: Tile[];\n  public font: SpriteFont;\n  public newTileTimer: Timer;\n\n  private pointerIsDown: boolean = false;\n  private lastKnownPointerPosition: Vector;\n\n  constructor() {\n    super({ displayMode: DisplayMode.FullScreen, width: 128, height: 128, suppressConsoleBootMessage: true, suppressPlayButton: true });\n  }\n\n  public start() {\n\n    this.tiles = [];\n    // Create new scene with a player\n    this.levelOne = new LevelOne(this);\n\n    for (let i = 0; i < 9; i++){\n      this.addTileOnGrid();\n    }\n\n    this.font = new SpriteFont({\n      image: Resources.SpriteFont,\n      alphabet: '0123456789abcdefghijklmnopqrstuvwxyz,!\\'&.\"?- ',\n      caseInsensitive: true,\n      columns: 16,\n      rows: 3,\n      spWidth: 16,\n      spHeight: 16\n    });\n\n    this.newTileTimer = new Timer({fcn: () => {\n      console.log(\"new tile\");\n      this.addTileOnGrid();\n    },\n    interval: 1000, repeats: true});\n\n    this.screen.resolution = {width: 256, height: 256};\n    this.levelOne.add(this.newTileTimer);\n    this.add('levelOne', this.levelOne);\n\n    this.input.keyboard.on('release', (evt) => {\n      if (evt.key == Input.Keys.Space) {\n        this.addTileOnGrid();\n      }\n    });\n\n    this.input.pointers.primary.on('down', (evt) => {\n      this.pointerIsDown = true;\n      this.lastKnownPointerPosition = evt.worldPos;\n    });\n\n    this.input.pointers.primary.on('up', (evt) => {\n      this.pointerIsDown = false;\n    });\n\n    // Automatically load all default resources\n    const loader = new Loader(Object.values(Resources));\n\n    return super.start(loader);\n  }\n\n  public onPostUpdate(engine, delta){\n    // If the pointer is holding down on an edge of the screen, accelerate tiles in that direction.\n\n    if (this.pointerIsDown){\n      let position = this.lastKnownPointerPosition;\n      let worldBounds = this.getWorldBounds();\n      let xTouchRegionWidth = worldBounds.width / 3;\n      let yTouchRegionHeight = worldBounds.height / 3;\n\n      let dx = 0;\n      let dy = 0;\n\n      if (position.x > xTouchRegionWidth * 2){\n        // touching right side of screen\n        dx = 1;\n      }\n      else if (position.x < xTouchRegionWidth){\n        // touching left side of screen\n        dx = -1;\n      }\n\n      if (position.y > yTouchRegionHeight * 2){\n        // touching bottom of screen\n        dy = 1;\n      }\n      else if (position.y < yTouchRegionHeight){\n        dy = -1;\n      }\n      if (dx != 0 || dy != 0){\n        for (let tile of this.tiles.filter(tile => !tile.isKilled())){\n          tile.accelerate(dx, dy);\n        }\n      }\n    }\n\n  }\n\n  private addTileOnGrid(){\n    if (this.tiles.filter(tile => !tile.isKilled()).length > 64) {\n      return; // max number of active tiles tiles\n    }\n    let x = Math.random() * this.canvasWidth;\n    let y = Math.random() * this.canvasHeight;\n    let value = Math.pow(2, Math.floor(Math.random() * 3));\n    const tile = new Tile(game, value, x, y);\n    this.levelOne.add(tile);\n    this.tiles.push(tile);\n  }\n}\nconst game = new Game();\ngame.start().then(() => {\n  game.goToScene('levelOne');\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n// It's empty as some runtime module handles the default behavior\n__webpack_require__.x = x => {};\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\nvar deferredModules = [\n\t[995,325]\n];\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\nvar checkDeferredModules = x => {};\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime, executeModules] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n\t// add entry modules from loaded chunk to deferred list\n\tif(executeModules) deferredModules.push.apply(deferredModules, executeModules);\n\n\t// run deferred modules when all chunks ready\n\treturn checkDeferredModules();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkexcalibur_webpack\"] = self[\"webpackChunkexcalibur_webpack\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n\nfunction checkDeferredModulesImpl() {\n\tvar result;\n\tfor(var i = 0; i < deferredModules.length; i++) {\n\t\tvar deferredModule = deferredModules[i];\n\t\tvar fulfilled = true;\n\t\tfor(var j = 1; j < deferredModule.length; j++) {\n\t\t\tvar depId = deferredModule[j];\n\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferredModules.splice(i--, 1);\n\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n\t\t}\n\t}\n\tif(deferredModules.length === 0) {\n\t\t__webpack_require__.x();\n\t\t__webpack_require__.x = x => {};\n\t}\n\treturn result;\n}\nvar startup = __webpack_require__.x;\n__webpack_require__.x = () => {\n\t// reset startup function so it can be called again when more startup code is added\n\t__webpack_require__.x = startup || (x => {});\n\treturn (checkDeferredModules = checkDeferredModulesImpl)();\n};","// run startup\n__webpack_require__.x();\n"],"sourceRoot":""}